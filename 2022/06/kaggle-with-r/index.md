---
pagetitle: Kaggleåˆã‚³ãƒ³ãƒšã«Rã§æŒ‘æˆ¦ã—ãŸè©±
title: |
  Kaggleåˆã‚³ãƒ³ãƒšã« \
  Rã§æŒ‘æˆ¦ã—ãŸè©±
subtitle: |
  [Tokyo.R #99](https://tokyor.connpass.com/event/249096/)
author: |
  <a href="https://twitter.com/igjit" class="name">@igjit</a>
theme: white
revealjs-url: ../../../reveal.js
css:
  - ../../../css/reveal.css
  - ../../../css/fix_highlight_zenburn.css
slideNumber: true
transition: none
history: true
---

<style type="text/css" rel="stylesheet">
.reveal .bordered-table table td { border: 1px solid; }
.reveal .bordered-table table tbody tr:last-child td { border: 1px solid; }
</style>

![](https://igjit.github.io/images/avatar.png){width=256}

<a href="https://twitter.com/igjit" class="name">@igjit</a>

- ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢
- [Rã§å¤‰ãªã‚‚ã®ã‚’ä½œã‚‹](https://igjit.github.io/slides/) äºº

---

å…±è‘—ã§æœ¬ã‚’æ›¸ãã¾ã—ãŸã€‚

![](images/r-efficiency-book.jpg){width="30%"}

<p class="text-small" style="margin-top:0">
<https://gihyo.jp/book/2022/978-4-297-12524-0>
</p>

---

æœ¬é¡Œ

---

Kaggleã‚³ãƒ³ãƒšã«åˆæŒ‘æˆ¦ã—ã¦

<div class="fragment">
éŠ…ãƒ¡ãƒ€ãƒ«ã‚’ç²ã‚Šã¾ã—ãŸï¼
![](images/ss-leaderboard.png)
</div>

---

### æ¦‚è¦

---

[H&M Personalized Fashion Recommendations](https://www.kaggle.com/competitions/h-and-m-personalized-fashion-recommendations/overview)

![](images/ss-h-and-m-title.png)

<p class="text-small">
éå»ã®è³¼è²·å±¥æ­´ã‚’å…ƒã«ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã‚’æ¨è–¦ã™ã‚‹
</p>

---

### ãƒãƒ¼ãƒ 

---

![](images/ss-team.png){width="70%"}

- ä¼šç¤¾ã®åŒåƒš
- ãƒ‡ãƒ¼ã‚¿ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢2äººã€ãƒ‡ãƒ¼ã‚¿ã‚¢ãƒŠãƒªã‚¹ãƒˆ2äºº

---

ã‚„ã£ãŸã“ã¨

---

### ã¾ãšã¯è©•ä¾¡æŒ‡æ¨™ã‚’ç¢ºèª

---

![](images/ss-evaluation.png){.img-shadow width="100%"}

<p style="font-size: 0.4em">
<https://www.kaggle.com/competitions/h-and-m-personalized-fashion-recommendations/overview/evaluation>
</p>

---

ãªã‚‹ã»ã©ã‚ã‹ã‚‰ã‚“

---

[Kaggleã§å‹ã¤ãƒ‡ãƒ¼ã‚¿åˆ†æã®æŠ€è¡“](https://gihyo.jp/book/2019/978-4-297-10843-4)
ã‚’èª­ã‚€

![](images/kaggle-book.jpg){.img-shadow width="30%"}

----

2.3.6 ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹è©•ä¾¡æŒ‡æ¨™

ã§ MAP@K ãŒãã‚ã—ãèª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã€‚

---

### ã¨ã‚Šã‚ãˆãšfirst submit

---

Kaggle Notebookã§R, Pythonã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã€å…±æœ‰ã§ãã‚‹ã€‚

[Rã§ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦](https://www.kaggle.com/code/igjit1/my-first-h-m-submission-with-r)submit

![](images/ss-first-submit.png){.img-shadow width="80%"}

---

### ä»–ã®äººã®Notebookã‚’èª­ã‚€

---

æœ‰ç”¨ãªNotebookãŒå¤šæ•°å…¬é–‹ã•ã‚Œã¦ã„ã‚‹ã®ã§èª­ã‚“ã§å‚è€ƒã«ã™ã‚‹

![](images/ss-notebooks.png){.img-shadow width="75%"}

----

ç§ã¯

- [Recommend Items Purchased Together - [0.021]](https://www.kaggle.com/code/cdeotte/recommend-items-purchased-together-0-021)
- [H&M Trending Products Weekly](https://www.kaggle.com/code/byfone/h-m-trending-products-weekly)
- [H&M EDA & Rule Base by Customer Age](https://www.kaggle.com/code/hechtjp/h-m-eda-rule-base-by-customer-age)

ã‚’å‚è€ƒã«ã—ã¦

---

ãƒ«ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã®æ¨è–¦ã‚’[Rã§å®Ÿè£…](https://www.kaggle.com/code/igjit1/lb-0-0235-h-m-rule-base-solution-in-r)

![](images/ss-my-solution.png){.img-shadow width="80%"}

---

å€‹ã€…ã®ã‚¹ã‚³ã‚¢ã¯ãƒ¡ãƒ€ãƒ«åœã«é”ã—ãªã‹ã£ãŸã‘ã©

---

æœ€çµ‚æ—¥ã«ãƒãƒ¼ãƒ ã¿ã‚“ãªã®äºˆæ¸¬ã‚’ã‚¢ãƒ³ã‚µãƒ³ãƒ–ãƒ«ã•ã›ãŸçµæœã€

<div class="fragment">
éŠ…ãƒ¡ãƒ€ãƒ«ã‚’ç²å¾—ã§ããŸï¼
![](images/ss-leaderboard.png)
</div>

---

å¾Œæ—¥

---

ä¸Šä½ã®ãƒãƒ¼ãƒ ã®è§£æ³•ãŒå¤šæ•°å…¬é–‹ã•ã‚Œã¦ã„ã¦

- [å®Ÿå‹™ã§ãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ã‚’ã‚„ã£ã¦ã„ã‚‹ã®ã§Kaggle H&Mã‚³ãƒ³ãƒšã«å‚åŠ ã—ã¾ã—ãŸ](https://yng87.github.io/blog/2022/05/kaggle_hm/)
- [ã€Kaggleã€‘H&Mã‚³ãƒ³ãƒšå‚åŠ è¨˜(133rd/2952ğŸ¥ˆ)](https://zenn.dev/zerebom/articles/9e6bad764d3f97)
- [DeNAãƒ»MoT AIæŠ€è¡“å…±æœ‰ä¼šç™ºè¡¨è³‡æ–™ H&Mã‚³ãƒ³ãƒšã®æŒ¯ã‚Šè¿”ã‚Š](https://speakerdeck.com/kuto5046/denamot-aiji-shu-gong-you-hui-fa-biao-zi-liao-h-and-mkonpefalsezhen-rifan-ri)

---

- 1st stage: è³ªã®é«˜ã„è¤‡æ•°ã®candidate generation
- 2nd stage: GBDTã§reranking

ã®2-stageãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ãŒä¸€èˆ¬çš„ã ã£ãŸæ¨¡æ§˜

---

Rã§ã‚‚[Tidymodels](https://www.tidymodels.org/)ã§[LightGBM](https://lightgbm.readthedocs.io/en/latest/R/index.html)ã‚’ä½¿ãˆã‚‹ã—ã€  
Rã§ä¸Šä½ã‚’ç›®æŒ‡ã›ãŸã‹ã‚‚ã—ã‚Œãªã„ã€‚

---

Q: Rã§Kaggleã‚’æˆ¦ãˆã‚‹ã®ã‹

---

A: ã‚³ãƒ³ãƒšã«ã‚ˆã£ã¦ã¯ã„ã‘ã‚‹ã‹ã‚‚

---

ãŸã ã€ç¾æ™‚ç‚¹ã§ã¯ã€Pythonã‚’èª­ã‚€å¿…è¦ãŒã‚ã‚‹

---

H&Mã‚³ãƒ³ãƒšã§å…¬é–‹ã•ã‚ŒãŸNotebokã®æ•°

<div class="fragment">
|        |   n |
|:---|---:|
| Python | 405 |
| R      |  14 |
</div>

----

ãã®ã†ã¡4ä»¶ã¯ç§

![](images/ss-notebooks-r.png){.img-shadow width="90%"}

---

ã¿ã‚“ãªRã§Kaggleã‚„ã‚ã†ãªï¼

---

### Rã§è‰¯ã‹ã£ãŸã¨ã“ã‚

---

åœ§å€’çš„ã«å¿«é©ãªãƒ‡ãƒ¼ã‚¿æ•´å½¢

![](images/logo/dplyr.png){width=25%}
![](images/logo/tidyr.png){width=25%}
![](images/logo/pipe.png){width=25%}

---

purrrã§æ›¸ã„ãŸãƒªã‚¹ãƒˆå‡¦ç†ã‚’furrrã§ã‚‰ãã‚‰ãä¸¦åˆ—åŒ–

![](images/logo/purrr.png){width=25%}
![](images/logo/furrr.png){width=25%}

---

ã»ã‹ã«ã‚‚ä¾¿åˆ©ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŸãã•ã‚“

![](images/logo/lubridate.png){width=25%}
![](images/logo/stringr.png){width=25%}

---

ã¿ã‚“ãªRã§Kaggleã‚„ã‚ã†ãªï¼

---

Kaggleã¯æ¥½ã—ã„

<div style="margin-top:1.2em">
- real worldã®èª²é¡Œ
- ä¸–ç•Œä¸­ã®ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆãŒåŒã˜å•é¡Œã‚’è§£ã
- ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆã¨å‹æƒ…ãƒ»åŠªåŠ›ãƒ»å‹åˆ©
</div>

---

## Enjoy!
